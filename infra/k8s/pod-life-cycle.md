# pod 의 라이프사이클
* 파드는 정의된 라이프사이클을 따른다.
* `Pending` 단계에서 시작하여 기본 컨테이너 중 적어도 하나 이상 OK 로 시작하면 `Running` 단계를 통과한다.
* 이후에 파드의 컨테이너가 실패로 종료되었는지 여부에 따라 `Succeeded` 또는 `Failed` 단계로 이동한다.
* 파드가 실행되는 동안에, `kubelet`(클러스터의 각 노드에서 실행되는 에이전트) 은 일종의 오류를 처리하기 위해 컨테이너를 다시 시작할 수 있다.
* 파드 내에서 쿠버네티스는 다양한 컨테이너 상태를 추적하고 파드를 다시 정상 상태로 만들기 위하여 취할 조치를 결정한다.

## pod 의 수명

## pod 의 단계
* 파드의 `status` 필드는 `phase` 필드를 포함하는 `PodStatus 오브젝트` 로 정의된다. (결국 오브젝트로 정의가 된다는 것 같은데 확실히 파악하긴 어렵다...)
* 파드의 phase 는 파드가 라이프사이클 중 어느 단계에 해당하는지 표현하는 고수준의 요약이다.
  * phase 는 컨테이너나 파드의 관측정보에 대한 포괄적인 롤업(업데이트) 이나 포괄적인 상태머신을 표현하도록 의도되지는 않는다.
* 파드 phase 값에서 숫자와 의미는 엄격하게 지켜진다. 여기에 문서화된 내용 이외에는 파드와 파드에 주어진 phase 값에 대해서 어떤 사항도 가정되어서는 안된다.

### phase
* pending
  * 파드가 쿠버네티스 클러스터에서 승인되었지만, 하나 이상의 컨테이너가 설정되지 않았고 실행할 준비가 되지 않았다. 여기에는 파드가 스케줄되기 이전까지의 시간뿐만 아니라 네트워크를 통한 이미지 다운로드 시간도 포함된다.
* running
  * 파드가 노드에 바인딩되었고, 모든 컨테이너가 생성되었다. `적어도 하나의 컨테이너` 가 아직 실행 중이거나 시작 또는 재시작 중에 있다.
* succeeded
  * 파드에 있는 모든 컨테이너들이 성공적으로 종료되었고, 재시작되지 않을 것이다.
* failed
  * 파드에 있는 모든 컨테이너가 종료되었고, 적어도 하나 이상의 컨테이너가 실패로 종료되었다. 즉, 해당 컨테이너는 non-zero 상태로 빠져나왔거나(exited) 시스템에 의해서 종료(terminated) 되었다.
* unknown
  * 어떤 이유에 의해서 파드의 상태를 얻을 수 없다. 이 단계는 일반적으로 파드가 실행되어야 하는 노드와의 통신오류로 인해 발생한다.

> 파드가 삭제 될 때, 일부 kubectl 커맨드에서는 `Terminating` 이 표시가 되는데 이 `Terminating` 상태는 파드의 단계에 해당하지 않는다. 
> 파드에는 gracefully 하게 종료되도록 기간이 부여되며, 그 기본값은 30초이다. 강제로 파드를 종료하려면 --force 플래그를 설정하면 된다.

노드가 죽거나 클러스터의 나머지와의 연결이 끊어지면, 쿠버네티스는 손실된 노드의 모든 파드의 phase 를 `failed` 로 설정하는 정책을 적용한다.

## 컨테이너 상태
* 

## reference
* [파드 라이프사이클](https://kubernetes.io/ko/docs/concepts/workloads/pods/pod-lifecycle/#%ED%8C%8C%EB%93%9C%EC%9D%98-%EB%8B%A8%EA%B3%84)
